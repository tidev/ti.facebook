---
name: Modules.Facebook
summary: |
    Add-on Facebook module.  
description: |
    The Facebook module is used for connecting your application with 
    Facebook. This module supports the following features:

    * Logging in to Facebook and authorizing your application.

    * Making requests through the Facebook Graph API using the
      [requestWithGraphPath](Modules.Facebook.requestWithGraphPath) method.
      
    * Posting Facebook dialogs.

    #### Getting Started

    -   Note that this module is only available for Release 3.5.1 and later, and is included with the
        Titanium SDK.  You do not need to download or unpack it.

    -   Edit the `modules` section of your tiapp.xml file to include this module:

            <modules>
                <!-- Add the appropriate line(s) to your modules section -->
                <module platform="android">facebook</module>
                <module platform="iphone">facebook</module>
            </modules>

    -   On the iOS platform, add the following property to your tiapp.xml file and replace
        FACEBOOK_APP_ID with your Facebook application ID:

             <property name="ti.facebook.appid">FACEBOOK_APP_ID</property>

    -   On the Android platform, add the following property to your tiapp.xml file:

        <android xmlns:android="http://schemas.android.com/apk/res/android">
            <manifest>
                <application>
                    <activity android:label="SampleFB"
                        android:name="com.facebook.LoginActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar"/>
                    <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/>
                </application>
            </manifest>
        </android>

        Also add the following string resource in a strings.xml file in the project folder 
        /platform/android/res/values/strings.xml and replace FACEBOOK_APP_ID with yout Facebook
        application ID:

        <resources><string name="app_id">495338853813822</string></resources>

    -   On the Android platform, all Windows/TabGroup in the app must create a proxy. We must 
        pass to the proxy the Ti.UI.Window or Ti.UI.TabGroup that will be using the proxy, so 
        that the proxy can attach itself to the window's or tabgroup's activity. The proxy object 
        must be created prior to calling open() on the window or tabgroup in order to make sure 
        the Activity onCreate event is captured correctly. 

            win1.fbProxy = fb.createActivityWorker({lifecycleContainer: win1});

        In Android only a single Activity is active at any time. In Titanium, an Activity corresponds 
        to a standalone (i.e. not a Tab window) Ti.UI.Window or Ti.UI.TabGroup. The Facebook SDK 
        contains tools to synchronize state between the various activities in the app, and this module 
        implements that functionality, but for this to work we need to tell the module which is the 
        currently active Activity.

    -    Instantiate the module with the `require('facebook')` method, then make subsequent API calls
         with the new Facebook object.

             var fb = require('facebook');
             fb.permissions = [FACEBOOK_APP_PERMISSIONS];
             fb.initialize(1000);
             fb.authorize();

    #### Facebook Login and Authorization

    To use Facebook, a user must log in to Facebook and explicitly authorize the application to 
    perform certain actions, such as accessing profile information or posting status messages.

    There are two ways to initiate the login process:

    * Call [authorize](Modules.Facebook.authorize) to prompt the user to login and authorize
      the application.

    * Create a Facebook [LoginButton](Modules.Facebook.LoginButton) to allow the user to 
      log in if desired. You can also add either readPermissions or publishPermissions, 
      otherwise the default is request for `public_profile`. Doing so will let the LoginButton 
      request for permissions when logging in. Note that Facebook does not support setting 
      both parameters at the same time to the LoginButton. 

    Which approach you take depends on your UI and how central Facebook is to your
    application.

    To create a Facebook App ID, go to the Facebook Developer App:
    [developers.facebook.com/apps](https://developers.facebook.com/apps)

    #### Requesting read and publish permissions

    requestNewReadPermissions

        var fb = require('facebook');
        fb.requestNewReadPermissions(['read_stream','user_hometown', etc...], function(e){
            if(e.success){
                fb.requestWithGraphPath(...);
            } else if (e.cancelled){
                ....
            } else {
                Ti.API.debug('Failed authorization due to: ' + e.error);
            }
        });

    requestNewPublishPermissions

    You must use the audience constants from the module, either AUDIENCE_NONE, AUDIENCE_ONLY_ME, 
    AUDIENCE_FRIENDS, or AUDIENCE_EVERYONE. Note that it is not an error for the user to 'Skip' 
    your requested permissions, so you should check the module's permissions property following the call.

        var fb = require('facebook');
        fb.requestNewPublishPermissions(['read_stream','user_hometown', etc...], fb.AUDIENCE_FRIENDS, function(e){
            if(e.success){
                fb.requestWithGraphPath(...);
            } else if (e.cancelled){
            ....
            } else {
                Ti.API.debug('Failed authorization due to: ' + e.error);
            }
        });

    For a complete list of permissions, see the [official Facebook Permissions Reference](https://developers.facebook.com/docs/facebook-login/permissions/)        
    
    #### Share Dialogs

    The Share dialog prompts a person to publish an individual story or an Open Graph story 
    to their timeline. This does not require Facebook Login or any extended permissions, 
    so it is the easiest way to enable sharing on web.

    * First check if you can use it - call fb.getCanPresentShareDialog() which returns a boolean.
    
    * To share a user's status just call fb.share({}); Note: this is documented for iOS but not Android, so use with caution.
    
    * To share a link call fb.share({url: 'http://example.com' });
    
    * To post a graph action call:

        fb.share({url: someUrl, namespaceObject: 'myAppnameSpace:graphObject', objectName: 'graphObject', imageUrl: someImageUrl,
        title: aTitle, description: blahBlah, namespaceAction: 'myAppnameSpace:actionType', placeId: facebookPlaceId});

    For details on dialog see the 
    [official Facebook Share Dialogs documentation](https://developers.facebook.com/docs/sharing/reference/share-dialog).  

    #### Send Requests Dialogs

    Sends an application request. Fires a `sendRequestCompleted` event.

        var fb = require('facebook');
        fb.presentSendRequestDialog({message: 'Go to https://appcelerator.com/'});

    For details on dialog see the 
    [official Facebook Share Dialogs documentation](https://developers.facebook.com/docs/games/requests/v2.2).  

    #### Like Button

    We can create a Like button just like any other view, with specific parameters documented in Facebook docs. 
    Note there is no completion callback or event, and Facebook policies state "If you use the Like button on iOS 
    or Android, donâ€™t collect or use any information from it."

        var likeButton = fb.createLikeButton({
            objectId: "https://www.facebook.com/appcelerator", // URL or Facebook ID
            foregroundColor: "white", // A color in Titanium format - see Facebook docs
            likeViewStyle: 'box_count', // standard, button, box_count - see FB docs
            auxiliaryViewPosition: 'inline', // bottom, inline, top - see FB docs
            horizontalAlignment: 'left', // center, left, right - see FB docs,
            objectType: 'page', // iOS only, 'page', 'openGraphObject', or 'unknown' - see FB docs
            soundEnabled: true // boolean, iOS only
        });
        win.add(likeButton); 
    
    #### Events and error handling

    The error handling adheres to the new Facebook guideline for events such as login, shareCompleted and 
    requestSendCompleted. Here is how to handle login events:

        var fb = require('facebook');
        fb.addEventListener('login',function(e) {
            // You *will* get this event if loggedIn == false below
            // Make sure to handle all possible cases of this event
            if (e.success) {
                alert('login from uid: '+e.uid+', name: '+JSON.parse(e.data).name);
                label.text = 'Logged In = ' + fb.loggedIn;
            }
            else if (e.cancelled) {
                // user cancelled 
                alert('cancelled');
            }
            else {
                alert(e.error);         
            }
        });
        fb.addEventListener('logout', function(e) {
            alert('logged out');
            label.text = 'Logged In = ' + fb.loggedIn;
        });

    #### Submitting an iOS Application to the iTunes Store

    When including the Facebook module in an iOS project and built for the iTunes Store, during the
    validation process you may receive an error message referring to an Improper Advertising identifier
    [IDFA] Usage.

    As part of the Apple review process when submitting an application, you will be asked if your app
    uses the Advertising Identifier (IDFA). Please check "Yes". You will then be asked how your app
    makes use of it. The question will take this form:

        This app uses the Advertising Identifier to (select all that apply)?
        - Serve advertisements within the app
        - Attribute this app installation to a previously served advertisement
        - Attribute an action taken within this app to a previously served advertisement

    Select the second and third options.

    You will also be asked to check a box to confirm that your app honors a user's Limit Ad Tracking
    setting in iOS. The Facebook SDK honors the iOS Limited Ad Tracking Setting. When a person enables
    Limited Ad Tracking, Facebook only uses data obtained through the use of the Advertising Identifier
    for "Limited Advertising Purposes" as defined by the iOS Developer Program License Agreement. Please
    make sure to check this box when prompted.

    For more information, see [Facebook Issue #242477629268301](https://developers.facebook.com/bugs/242477629268301/)
    and [TIMODOPEN-391](https://jira.appcelerator.org/browse/TIMODOPEN-391).

extends: Titanium.Module
since: "3.1.0"
platforms: [android, iphone, ipad]
methods:

  - name: authorize
    summary: |
        Prompts the user to log in (if not already logged in) and authorize your application.  
    description: |
        Be sure to set your [appid](Modules.Facebook.appid) and your required 
        [permissions](Modules.Facebook.permissions) before calling `authorize`.

        A [login](Modules.Facebook.login) event is generated to indicate successful or
        unsuccessful login attempt.

  - name: dialog
    summary: Opens a supported Facebook dialog.
    description: |
        For a list of dialogs, parameters, and response formats, see the 
        [official documentation for Facebook Dialogs](http://developers.facebook.com/docs/reference/dialogs/).  

        The callback is invoked when the dialog is closed, either because the user
        approved the action, or canceled the dialog.
    parameters:
      - name: action
        summary: Specifies which dialog to show, such as "feed".
        type: String

      - name: params
        summary: |
            A dictionary object for pre-filling some of the dialog's fields.  
        type: Object

      - name: callback
        summary: Callback to invoke  when the user completes or cancels the dialog.
        type: Callback<FacebookDialogResponse>

  - name: logout
    summary: Clears the OAuth `accessToken` and logs out the user.

  - name: request
    summary: Makes a request to the legacy Facebook REST API.
    description: |
        For details on API calls and responses, see the 
        [offical Facebook REST API documentation](http://developers.facebook.com/docs/reference/rest/).
    parameters:

      - name: method
        summary: The REST API method to call.
        type: String

      - name: params
        summary: |
            A dictionary object for setting parameters required by the call, if any.
        type: Object

      - name: callback
        summary: Callback to invoke  when the request completes.
        type: Callback<FacebookRESTResponse>

  - name: requestWithGraphPath
    summary: Makes a Facebook Graph API request.
    description: |
        If the request requires user authorization, the user must be logged in, and your app
        must be authorized to make the request. You can check the
        [loggedIn](Modules.Facebook.loggedIn) property to determine if the user is logged in.

        Every Facebook object has an associated path. For example, "me" requests information about 
        the current user.

        For a complete list of Graph API methods, parameters and return types, see the 
        [official Facebook Graph API documentation](http://developers.facebook.com/docs/reference/api/).
    parameters:

      - name: path
        summary: Graph API path to request.  
        type: String

      - name: params
        summary: |
            A dictionary object for setting parameters required by the call, if any.  
        type: Dictionary

      - name: httpMethod
        summary: The HTTP method (GET/POST/DELETE) to use for the call.
        type: String

      - name: callback
        summary: Callback to invoke  when the request completes.
        type: Callback<FacebookGraphResponse>

  - name: reauthorize
    summary: Makes a request to Facebook for additional permissions.
    description: |
        iOS 6's facebook login forbids minimum authorization to include write permissions.
        In order to make any write actions, the app must reauthorize asking for the additional
        permissions. If the application already has these permissions, there will be no user
        interaction.
    platforms: [iphone, ipad]
    parameters:

      - name: permissions
        summary: |
            Array of additional permissions to request. For a complete list of permissions, see the 
            [official Facebook Permissions Reference](http://developers.facebook.com/docs/reference/api/permissions/)
        type: Array<String>

      - name: audience
        summary: |
            The extent of the visibility write permissions will have. The value of audience should be one of "me", "friends", or "everyone"
        type: String
        
      - name: callback
        summary: Callback to invoke when the request completes.
        type: Callback<FacebookReauthResponse>

  - name: publishInstall
    since: "3.4.1"
    summary: |
        Manually publish an attributed install to the facebook graph.  
    description: |
        Be sure to set your [appid](Modules.Facebook.appid) before calling `publishInstall`.

events:

  - name: login
    summary: Fired at session login.
    properties:
      - name: success
        summary: |
            Indicates if the user was logged in successfully.
            Returns `true` if request succeeded, `false` otherwise.
        type: Boolean

      - name: error
        summary: |
            Error message, if any returned.
            Will be undefined if `success` is `true`.
        type: String
    
      - name: code
        summary: |
            Error code.
            Error code will be 0 if `success` is `true`, nonzero otherwise. If the error
            was generated by the operating system, that system's error value is used.
            Otherwise, this value will be -1.
        type: Number

      - name: uid
        summary: User ID returned by Facebook if the login was successful.
        type: String

      - name: data
        summary: |
            Data returned by Facebook when we query for the UID (using graph path "me")
            after a successful login. Data is in JSON format, and includes information 
            such as user name, locale and gender.

      - name: cancelled
        summary: Indicates if the user canceled the login request by closing the dialog.
        type: Boolean

  - name: logout
    summary: Fired at session logout.

properties:
  - name: BUTTON_STYLE_NORMAL
    summary: |
        Use with [LoginButton.style](Modules.Facebook.LoginButton.style) to specify
        the default login button reading "Connect" or "Login".
    type: Number
    permission: read-only

  - name: BUTTON_STYLE_WIDE
    summary: |
        Use with [LoginButton.style](Modules.Facebook.LoginButton.style) to specify
        a wide login button reading "Connect with Facebook" or "Login with Facebook".
    type: Number
    permission: read-only

  - name: accessToken
    summary: OAuth token set after a successful `authorize`.
    type: String
    permission: read-only

  - name: appid
    summary: Your Facebook application id. You need to set this for anything to work.
    type: String

  - name: expirationDate
    summary: Time at which the `accessToken` expires.
    type: Date
    permission: read-only

  - name: forceDialogAuth
    summary:  |
        Indicates whether the login should use the traditional dialog-based
        authentication.
    description: |
        Set to `false` to enable Single-Sign-On (SSO) in cases where the official Facebook app is on the 
        device.  Default is `true`, meaning the traditional, dialog-based
        authentication is used rather than SSO. See  the
        [Facebook Mobile Guide](http://developers.facebook.com/docs/guides/mobile) for 
        details of their Single-Sign-On scheme.
        
        To use the built-in iOS 6 login, set this property to `false`.
        This property is read-only on Mobile Web.
    type: Boolean
    default: true

  - name: loggedIn
    summary: Indicates if the user is logged in.
    type: Boolean
    permission: read-only

  - name: permissions
    summary: Array of permissions to request for your app. 
    description: |
        Be sure the permissions you want are set before calling
        [authorize](Modules.Facebook.authorize).

        To use the build-in iOS 6 login, this property cannot contain any of the following:
        offline_access, publish_actions, publish_stream, publish_checkins,
        ads_management, create_event, rsvp_event, manage_friendlists, manage_notifications,
        or manage_pages.

        For a complete list of permissions, see the 
        [official Facebook Permissions Reference](http://developers.facebook.com/docs/reference/api/permissions/)
    type: Array<String>

  - name: uid
    summary: Unique user ID returned from Facebook.
    type: String
    permission: read-only

examples:

  - title: Authorize
    example: |
        
        Shows official Facebook dialog for logging in the user and prompting the user to approve your 
        requested permissions.  Listen for the module's [login](Modules.Facebook.login) event to 
        determine whether the request succeeded.
        
            var fb = require('facebook');
            fb.appid = FACEBOOK_APP_ID;
            fb.permissions = ['publish_stream']; // Permissions your app needs
            fb.forceDialogAuth = true;
            fb.addEventListener('login', function(e) {
            	if (e.success) {
            		alert('Logged In');
            	} else if (e.error) {
            		alert(e.error);
            	} else if (e.cancelled) {
            		alert("Canceled");
            	}
            });
            fb.authorize();
        
  - title: Logout
    example: |
        
        Logout the user and forget the authorization token.  The 
        [logout](Modules.Facebook.logout) event is fired after the user is logged out.
        
            fb.addEventListener('logout', function(e) {
            	alert('Logged out');
            });
            fb.logout();
        
        
  - title: Authorize/Logout Using the Facebook LoginButton
    example: |
        
        You can use the the Facebook-themed [LoginButton](Modules.Facebook.LoginButton)
        to allow the user to log in as required. The button updates its state automatically depending 
        on whether the user is logged in or not.  When the user is logged in, then the button 
        will show "Logout", and vice-versa.
        
        Note that you don't need to set a click listener or anything else on the button. 
        To be notified when the user logs in or out, add event listeners for the 
        [login](Modules.Facebook.login) and [logout](Modules.Facebook.logout) events
        provided by the Facebook module, as in the example below.
        
            // Don't forget to set your appid and requested permissions, else the login button
            // won't be effective.
            var win = Ti.UI.createWindow({backgroundColor: 'white'});
            var fb = require('facebook');
            fb.appid = FACEBOOK_APP_ID;
            fb.permissions = ['publish_stream'];
            fb.addEventListener('login', function(e) {
            	if (e.success) {
            		alert('Logged in');
            	}
            });
            fb.addEventListener('logout', function(e) {
            	alert('Logged out');
            });
                
            // Add the button.  Note that it doesn't need a click event listener.
            win.add(fb.createLoginButton({
                top : 50,
                style : fb.BUTTON_STYLE_WIDE
            }));
            win.open()

        The specified button style ('wide' or `BUTTON_STYLE_WIDE`) shows a wide version of the 
        button that displays "Connect with Facebook" instead of just "Connect".

  - title: Alloy XML Markup
    example: |
        Example of using the Facebook Login Button in Alloy.

        This example loads the Facebook v3 module and assigns it to the `Alloy.Globals.Facebook` namespace
        in the initializer file.  In the XML markup, add a LoginButton element with its `ns`
        (namespace) attribute set to `Alloy.Globals.Facebook`.
        In the controller, use the `Alloy.Globals.Facebook` namespace to reference the Facebook module.

        `app.js`:

            // Loads the Facebook module, which can be referenced by Alloy.Globals.Facebook
            Alloy.Globals.Facebook = require('facebook');

        `app/views/index.xml`:

            <Alloy>
                <Window>
                     <!-- Use the Alloy.Globals.Facebook namespace to create a Facebook module login button -->
                    <LoginButton id="fbButton" ns="Alloy.Globals.Facebook"/>
                </Window>
            </Alloy>

        `app/controllers/index.js`:

            // Use the Alloy.Globals.Facebook namespace to make Facebook module API calls
            var facebook = Alloy.Globals.Facebook;
            facebook.appid = FACEBOOK_APP_ID;
            facebook.permissions = [FACEBOOK_APP_PERMISSIONS];
            $.fbButton.style = facebook.BUTTON_STYLE_WIDE;
            $.index.open();
        
  - title: Simple Graph API Call
    example: |
        
        This example makes a call to the "me" graph path, which represents the current
        user. The JSON results are simply displayed in an alert.  This example assumes 
        the user is already logged in. You can check this with <Modules.Facebook.loggedIn>.
        
            fb.requestWithGraphPath('me', {}, 'GET', function(e) {
            	if (e.success) {
            		alert(e.result);
            	} else if (e.error) {
            		alert(e.error);
            	} else {
            		alert('Unknown response');
            	}
            });
        
        
  - title: Create an Event Using the Graph API
    example: |
        
        This example uses the Graph API to create an event in the logged-on user's Facebook account.
        This requires the "create_event" permission.
        
            // First make sure this permission exists
            fb.permissions = ['create_event'];
            fb.authorize();
            
            // ...
            // ...
            
            // Now create the event after you've confirmed authorize() was successful.
            var starttime = new Date(2012, 4, 31, 17, 0);
            var endtime = new Date(2012, 4, 31, 19, 0);
            var title = "Barry's Birthday Celebration";
            var description = "Barry will have a great party";
            var data = {
            	start_time: JSON.stringify(starttime), // API expects a JSON stringified date
            	end_time: JSON.stringify(endtime),
            	summary: description,
            	name: title
            };
            fb.requestWithGraphPath('me/events', data, 'POST', function(e) {
            	if (e.success) {
            		alert("Success! Returned from FB: " + e.result);
            	} else {
            		if (e.error) {
            			alert(e.error);
            		} else {
            			alert("Unknown result");
            		}
            	}
            });
        
        For more information on the Event object, see:

        * [Event in the Facebook Graph API Reference](http://developers.facebook.com/docs/reference/api/event/).
        
  - title: Set a User's Facebook Status Using the Graph API
    example: |
        
        This example uses the Graph API to set the user's Facebook status, which requires the 
        "publish_stream" permission.
        
            // First make sure this permission exists
            fb.permissions = ['publish_stream'];
            fb.authorize();
            
            // ...
            // ...
            
            // Now create the status message after you've confirmed that authorize() succeeded
            fb.requestWithGraphPath('me/feed', {message: "Trying out FB Graph API and it's fun!"}, 
                     "POST", function(e) {
            	if (e.success) {
            		alert("Success!  From FB: " + e.result);
            	} else {
            		if (e.error) {
            			alert(e.error);
            		} else {
            			alert("Unkown result");
            		}
            	}
            });
        
        For more information on the Staus object, see:
        
        * [Status in the Facebook Graph API Reference](http://developers.facebook.com/docs/reference/api/status/).  
        
  - title: Post a Photo Using the Graph API
    example: |
        
        This example posts a photo to the user's account using the Graph API.
        Another example below shows how to do this with the REST API, if desired. 
        This requires the "publish_stream" permission.
        
            // First make sure this permission exists
            fb.permissions = ['publish_stream'];
            fb.authorize();
            
            // ...
            // ...
            
            // Now post the photo after you've confirmed that authorize() succeeded
            var f = Ti.Filesystem.getFile('pumpkin.jpg');
            var blob = f.read();
            var data = {
            	message: 'This is a pumpkin',
            	picture: blob
            };
            fb.requestWithGraphPath('me/photos', data, 'POST', function(e){
            	if (e.success) {
            		alert("Success!  From FB: " + e.result);
            	} else {
            		if (e.error) {
            			alert(e.error);
            		} else {
            			alert("Unkown result");
            		}
            	}
            });

        For more information on posting photos, see:

        * [Photo in the Facebook Graph API Reference](http://developers.facebook.com/docs/reference/api/photo/) 
        
        
  - title: Post a photo using the REST API
    example: |
        
        This example posts a photo to the user's account using the REST API. Another example above shows 
        how to do this with the Graph API.  This requires the "publish_stream" permission.
        
            // First make sure this permission exists
            fb.permissions = ['publish_stream'];
            fb.authorize();
            
            // ...
            // ...
            
            // Now post the photo after you've confirmed that authorize() succeeded
            var f = Ti.Filesystem.getFile('pumpkin.jpg');
            var blob = f.read();
            var data = {
            	caption: 'This is a pumpkin',
            	picture: blob
            };
            fb.request('photos.upload', data, function(e){
            	if (e.success) {
            		alert("Success!  From FB: " + e.result);
            	} else {
            		if (e.error) {
            			alert(e.error);
            		} else {
            			alert("Unkown result");
            		}
            	}
            });
        
        For more information on posting photos using the REST API, see:

        * [photos.upload in the Facebook REST API Reference](http://developers.facebook.com/docs/reference/rest/photos.upload/) 
        
  - title: Show the Facebook Feed Dialog
    example: |
        
        This example shows how to display the offical Facebook Feed Dialog, for adding a
        post to the user's wall. In this example, we'll prefill some of the feed fields by 
        passing a data dictionary to the [dialog](Modules.Facebook.dialog) method; this is not required.
        

            var data = {
                link : "http://www.appcelerator.com",
                name : "Appcelerator Titanium Mobile",
                message : "Checkout this cool open source project for creating mobile apps",
                caption : "Appcelerator Titanium Mobile",
                picture : "http://developer.appcelerator.com/assets/img/DEV_titmobile_image.png",
                description : "You've got the ideas, now you've got the power. Titanium translates " +
                              "your hard won web skills into native applications..."
            };
            fb.dialog("feed", data, function(e) {
                if(e.success && e.result) {
                    alert("Success! New Post ID: " + e.result);
                } else {
                    if(e.error) {
                        alert(e.error);
                    } else {
                        alert("User canceled dialog.");
                    }
                }
            });
        
        For more information on Facebook Dialogs, see:

        * [Facebook Dialog Reference](http://developers.facebook.com/docs/reference/dialogs/) 

  - title: Requesting additional permissions for iOS 6
    example: |

        To use the built-in iOS 6 Facebook login, the application cannot request offline or write permissions
        upon intialization and must ask for write permission using the
        [reauthroize](Modules.Facebook.reauthorize) method.
        This example shows how to use the `reauthorize` method to request additional permissions
        to publish a post to the user's wall.

            var fb = require('facebook');
            fb.appid = FACEBOOK_APP_ID;
            // Initial permissions must exclude offline and write priviledges
            fb.permissions = ['read_stream'];
            // This property needs to be false to use the built-in iOS 6 login
            fb.forceDialogAuth = false;
            fb.addEventListener('login', function(e) {
                if (e.success) {
                    alert('Logged In');
                } else if (e.error) {
                    alert(e.error);
                } else if (e.cancelled) {
                    alert("Canceled");
                }
            });

            var button = Ti.UI.createButton({title: 'Open Feed Dialog'});
            button.addEventListener('click', function(e){
                // Ask for write permission
                fb.reauthorize(['publish_stream'], 'me', function(e){
                    if (e.success) {
                        // If successful, proceed with a publish call
                        fb.dialog("feed", {}, function(e) {
                            if(e.success && e.result) {
                                alert("Success! New Post ID: " + e.result);
                            } else {
                                if(e.error) {
                                    alert(e.error);
                                } else {
                                    alert("User canceled dialog.");
                                }
                            }
                        });
                    } else {
                        if (e.error) {
                            alert(e.error);
                        } else {
                            alert("Unknown result");
                        }
                    }
                });
            });

            var win = Ti.UI.createWindow({backgroundColor: 'white'});
            win.add(button);
            win.open();

            if (!fb.loggedIn) {
                fb.authorize();
            }


---
name: FacebookGraphResponse
extends: ErrorResponse
summary: |
    Argument passed to the graph API callback, in response to a
    [requestWithGraphPath](Modules.Facebook.requestWithGraphPath) call.
properties:
  - name: path
    summary: Graph API path of the original request.
    type: String

  - name: result
    summary: |
        If successful, returns the JSON response returned by Facebook.
        If the request is not successfully completed, the result is undefined.
    type: String

---
name: FacebookReauthResponse
extends: ErrorResponse
summary: Argument passed to the reauthorize callback when the request is completed or canceled.
properties:

  - name: cancelled
    summary: Indicates if the user canceled the dialog. 
    type: Boolean


---
name: FacebookDialogResponse
extends: ErrorResponse
summary: Argument passed to the dialog callback when a dialog is completed or canceled.
description: |
    The `success` and `cancelled` properties may not be reliable for dialogs. In the event
    that the user canceled the dialog, the `result` field is `undefined`.
properties:

  - name: cancelled
    summary: Indicates if the user canceled the dialog. 
    type: Boolean

  - name: result
    summary: |
        If successful, returns the JSON response containing the `post_id` of the new post.
        If the user canceled the dialog, the results is undefined.
    type: String


---
name: FacebookRESTResponse
extends: ErrorResponse
summary: |
    Argument passed to the REST API callback when a request completes (successfully
    or unsuccessfully).
properties:

  - name: method
    summary: REST method call you specified.
    type: String

  - name: result
    summary: |
        If successful, returns the JSON response returned by Facebook.
        If the request is not successfully completed, the result is undefined.
    type: String

